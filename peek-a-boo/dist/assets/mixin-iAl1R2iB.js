var jt=Object.defineProperty;var Pt=(i,e,t)=>e in i?jt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var f=(i,e,t)=>(Pt(i,typeof e!="symbol"?e+"":e,t),t),st=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var o=(i,e,t)=>(st(i,e,"read from private field"),t?t.call(i):e.get(i)),u=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},c=(i,e,t,n)=>(st(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t);var b=(i,e,t)=>(st(i,e,"access private method"),t);const $t=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],Et=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function Mt(i){return'\n    <style>\n      :host {\n        display: inline-flex;\n        line-height: 0;\n        flex-direction: column;\n        justify-content: end;\n      }\n\n      audio {\n        width: 100%;\n      }\n    </style>\n    <slot name="media">\n      <audio'.concat(xt(i),"></audio>\n    </slot>\n    <slot></slot>\n  ")}function Vt(i){return'\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n      }\n\n      video {\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        object-fit: var(--media-object-fit, contain);\n        object-position: var(--media-object-position, 50% 50%);\n      }\n\n      video::-webkit-media-text-track-container {\n        transform: var(--media-webkit-text-track-transform);\n        transition: var(--media-webkit-text-track-transition);\n      }\n    </style>\n    <slot name="media">\n      <video'.concat(xt(i),"></video>\n    </slot>\n    <slot></slot>\n  ")}function At(i,{tag:e,is:t}){var v,k,p,y,Z,Lt,W,G,E,J,T,V,K,dt,_,Rt,Q,at,tt,wt,et,St;const n=(k=(v=globalThis.document)==null?void 0:v.createElement)==null?void 0:k.call(v,e,{is:t}),s=n?It(n):[];return p=class extends i{constructor(){super(...arguments);u(this,T);u(this,K);u(this,_);u(this,Q);u(this,tt);u(this,et);u(this,W,!1);u(this,G,null);u(this,E,new Map);u(this,J,void 0);f(this,"get");f(this,"set");f(this,"call")}static get observedAttributes(){var a,g,l;return b(a=p,Z,Lt).call(a),[...(l=(g=n==null?void 0:n.constructor)==null?void 0:g.observedAttributes)!=null?l:[],...Et]}get nativeEl(){var d,a,g,l,h;return b(this,T,V).call(this),(h=(l=(a=(d=o(this,G))!=null?d:this.querySelector(":scope > [slot=media]"))!=null?a:this.querySelector(e))!=null?l:(g=this.shadowRoot)==null?void 0:g.querySelector(e))!=null?h:null}set nativeEl(d){c(this,G,d)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(d){this.toggleAttribute("muted",d)}get src(){return this.getAttribute("src")}set src(d){this.setAttribute("src","".concat(d))}get preload(){var d,a;return(a=this.getAttribute("preload"))!=null?a:(d=this.nativeEl)==null?void 0:d.preload}set preload(d){this.setAttribute("preload","".concat(d))}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});const d=Ht(this.attributes);t&&(d.is=t),e&&(d.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(d)}this.nativeEl.muted=this.hasAttribute("muted");for(const d of s)b(this,tt,wt).call(this,d);c(this,J,new MutationObserver(b(this,_,Rt).bind(this))),this.shadowRoot.addEventListener("slotchange",()=>b(this,K,dt).call(this)),b(this,K,dt).call(this);for(const d of this.constructor.Events)this.shadowRoot.addEventListener(d,this,!0)}handleEvent(d){d.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(d.type,{detail:d.detail}))}attributeChangedCallback(d,a,g){b(this,T,V).call(this),b(this,et,St).call(this,d,a,g)}connectedCallback(){b(this,T,V).call(this)}},y=new WeakMap,Z=new WeakSet,Lt=function(){if(o(this,y))return;c(this,y,!0);const d=new Set(this.observedAttributes);d.delete("muted");for(const a of s)if(!(a in this.prototype))if(typeof n[a]=="function")this.prototype[a]=function(...g){return b(this,T,V).call(this),(()=>{var m;if(this.call)return this.call(a,...g);const h=(m=this.nativeEl)==null?void 0:m[a];return h==null?void 0:h.apply(this.nativeEl,g)})()};else{const g={get(){var h,m,X;b(this,T,V).call(this);const l=a.toLowerCase();if(d.has(l)){const H=this.getAttribute(l);return H===null?!1:H===""?!0:H}return(X=(h=this.get)==null?void 0:h.call(this,a))!=null?X:(m=this.nativeEl)==null?void 0:m[a]}};a!==a.toUpperCase()&&(g.set=function(l){b(this,T,V).call(this);const h=a.toLowerCase();if(d.has(h)){l===!0||l===!1||l==null?this.toggleAttribute(h,!!l):this.setAttribute(h,l);return}if(this.set){this.set(a,l);return}this.nativeEl&&(this.nativeEl[a]=l)}),Object.defineProperty(this.prototype,a,g)}},W=new WeakMap,G=new WeakMap,E=new WeakMap,J=new WeakMap,T=new WeakSet,V=function(){o(this,W)||(c(this,W,!0),this.init())},K=new WeakSet,dt=function(){var l;const d=new Map(o(this,E)),a=(l=this.shadowRoot)==null?void 0:l.querySelector("slot:not([name])");(a==null?void 0:a.assignedElements({flatten:!0}).filter(h=>["track","source"].includes(h.localName))).forEach(h=>{var X,H;d.delete(h);let m=o(this,E).get(h);m||(m=h.cloneNode(),o(this,E).set(h,m),(X=o(this,J))==null||X.observe(h,{attributes:!0})),(H=this.nativeEl)==null||H.append(m),b(this,Q,at).call(this,m)}),d.forEach((h,m)=>{h.remove(),o(this,E).delete(m)})},_=new WeakSet,Rt=function(d){var a;for(const g of d)if(g.type==="attributes"){const{target:l,attributeName:h}=g,m=o(this,E).get(l);m&&h&&(m.setAttribute(h,(a=l.getAttribute(h))!=null?a:""),b(this,Q,at).call(this,m))}},Q=new WeakSet,at=function(d){d&&d.localName==="track"&&d.default&&(d.kind==="chapters"||d.kind==="metadata")&&d.track.mode==="disabled"&&(d.track.mode="hidden")},tt=new WeakSet,wt=function(d){if(Object.prototype.hasOwnProperty.call(this,d)){const a=this[d];delete this[d],this[d]=a}},et=new WeakSet,St=function(d,a,g){var l,h,m;["id","class"].includes(d)||!p.observedAttributes.includes(d)&&this.constructor.observedAttributes.includes(d)||(g===null?(l=this.nativeEl)==null||l.removeAttribute(d):((h=this.nativeEl)==null?void 0:h.getAttribute(d))!==g&&((m=this.nativeEl)==null||m.setAttribute(d,g)))},u(p,Z),f(p,"getTemplateHTML",e.endsWith("audio")?Mt:Vt),f(p,"shadowRootOptions",{mode:"open"}),f(p,"Events",$t),u(p,y,!1),p}function It(i){const e=[];for(let t=Object.getPrototypeOf(i);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t)){const n=Object.getOwnPropertyNames(t);e.push(...n)}return e}function xt(i){let e="";for(const t in i){if(!Et.includes(t))continue;const n=i[t];n===""?e+=" ".concat(t):e+=" ".concat(t,'="').concat(n,'"')}return e}function Ht(i){const e={};for(const t of i)e[t.name]=t.value;return e}var bt;const _t=At((bt=globalThis.HTMLElement)!=null?bt:class{},{tag:"video"});var Tt;At((Tt=globalThis.HTMLElement)!=null?Tt:class{},{tag:"audio"});class rt extends Event{constructor(t,n){super(t);f(this,"track");this.track=n.track}}const ct=new WeakMap;function r(i){var e;return(e=ct.get(i))!=null?e:zt(i,{})}function zt(i,e){let t=ct.get(i);return t||ct.set(i,t={}),Object.assign(t,e)}function ut(i,e){const t=i.videoTracks;r(e).media=i,r(e).renditionSet||(r(e).renditionSet=new Set);const n=r(t).trackSet;n.add(e);const s=n.size-1;s in ft.prototype||Object.defineProperty(ft.prototype,s,{get(){return[...r(this).trackSet][s]}}),queueMicrotask(()=>{t.dispatchEvent(new rt("addtrack",{track:e}))})}function ht(i){var n;const e=(n=r(i).media)==null?void 0:n.videoTracks;if(!e)return;r(e).trackSet.delete(i),queueMicrotask(()=>{e.dispatchEvent(new rt("removetrack",{track:i}))})}function Bt(i){var n;const e=(n=r(i).media.videoTracks)!=null?n:[];let t=!1;for(const s of e)s!==i&&(s.selected=!1,t=!0);if(t){if(r(e).changeRequested)return;r(e).changeRequested=!0,queueMicrotask(()=>{delete r(e).changeRequested,e.dispatchEvent(new Event("change"))})}}var L,R,w,I,Y;class ft extends EventTarget{constructor(){super();u(this,I);u(this,L,void 0);u(this,R,void 0);u(this,w,void 0);r(this).trackSet=new Set}[Symbol.iterator](){return o(this,I,Y).values()}get length(){return o(this,I,Y).size}getTrackById(t){var n;return(n=[...o(this,I,Y)].find(s=>s.id===t))!=null?n:null}get selectedIndex(){return[...o(this,I,Y)].findIndex(t=>t.selected)}get onaddtrack(){return o(this,L)}set onaddtrack(t){o(this,L)&&(this.removeEventListener("addtrack",o(this,L)),c(this,L,void 0)),typeof t=="function"&&(c(this,L,t),this.addEventListener("addtrack",t))}get onremovetrack(){return o(this,R)}set onremovetrack(t){o(this,R)&&(this.removeEventListener("removetrack",o(this,R)),c(this,R,void 0)),typeof t=="function"&&(c(this,R,t),this.addEventListener("removetrack",t))}get onchange(){return o(this,w)}set onchange(t){o(this,w)&&(this.removeEventListener("change",o(this,w)),c(this,w,void 0)),typeof t=="function"&&(c(this,w,t),this.addEventListener("change",t))}}L=new WeakMap,R=new WeakMap,w=new WeakMap,I=new WeakSet,Y=function(){return r(this).trackSet};class ot extends Event{constructor(t,n){super(t);f(this,"rendition");this.rendition=n.rendition}}function Ct(i,e){const t=r(i).media.videoRenditions;r(e).media=r(i).media,r(e).track=i;const n=r(i).renditionSet;n.add(e);const s=n.size-1;s in vt.prototype||Object.defineProperty(vt.prototype,s,{get(){return z(this)[s]}}),queueMicrotask(()=>{i.selected&&t.dispatchEvent(new ot("addrendition",{rendition:e}))})}function Ft(i){const e=r(i).media.videoRenditions,t=r(i).track;r(t).renditionSet.delete(i),queueMicrotask(()=>{r(i).track.selected&&e.dispatchEvent(new ot("removerendition",{rendition:i}))})}function Dt(i){const e=r(i).media.videoRenditions;!e||r(e).changeRequested||(r(e).changeRequested=!0,queueMicrotask(()=>{delete r(e).changeRequested,r(i).track.selected&&e.dispatchEvent(new Event("change"))}))}function z(i){return[...r(i).media.videoTracks].filter(t=>t.selected).flatMap(t=>[...r(t).renditionSet])}var S,A,x;class vt extends EventTarget{constructor(){super(...arguments);u(this,S,void 0);u(this,A,void 0);u(this,x,void 0)}[Symbol.iterator](){return z(this).values()}get length(){return z(this).length}getRenditionById(t){var n;return(n=z(this).find(s=>"".concat(s.id)==="".concat(t)))!=null?n:null}get selectedIndex(){return z(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[n,s]of z(this).entries())s.selected=n===t}get onaddrendition(){return o(this,S)}set onaddrendition(t){o(this,S)&&(this.removeEventListener("addrendition",o(this,S)),c(this,S,void 0)),typeof t=="function"&&(c(this,S,t),this.addEventListener("addrendition",t))}get onremoverendition(){return o(this,A)}set onremoverendition(t){o(this,A)&&(this.removeEventListener("removerendition",o(this,A)),c(this,A,void 0)),typeof t=="function"&&(c(this,A,t),this.addEventListener("removerendition",t))}get onchange(){return o(this,x)}set onchange(t){o(this,x)&&(this.removeEventListener("change",o(this,x)),c(this,x,void 0)),typeof t=="function"&&(c(this,x,t),this.addEventListener("change",t))}}S=new WeakMap,A=new WeakMap,x=new WeakMap;var C;class Nt{constructor(){f(this,"src");f(this,"id");f(this,"width");f(this,"height");f(this,"bitrate");f(this,"frameRate");f(this,"codec");u(this,C,!1)}get selected(){return o(this,C)}set selected(e){o(this,C)!==e&&(c(this,C,e),Dt(this))}}C=new WeakMap;var F;class qt{constructor(){f(this,"id");f(this,"kind");f(this,"label","");f(this,"language","");f(this,"sourceBuffer");u(this,F,!1)}addRendition(e,t,n,s,v,k){const p=new Nt;return p.src=e,p.width=t,p.height=n,p.frameRate=k,p.bitrate=v,p.codec=s,Ct(this,p),p}removeRendition(e){Ft(e)}get selected(){return o(this,F)}set selected(e){o(this,F)!==e&&(c(this,F,e),e===!0&&Bt(this))}}F=new WeakMap;function Ut(i,e){const t=r(i).media.audioRenditions;r(e).media=r(i).media,r(e).track=i;const n=r(i).renditionSet;n.add(e);const s=n.size-1;s in lt.prototype||Object.defineProperty(lt.prototype,s,{get(){return B(this)[s]}}),queueMicrotask(()=>{i.enabled&&t.dispatchEvent(new ot("addrendition",{rendition:e}))})}function Wt(i){const e=r(i).media.audioRenditions,t=r(i).track;r(t).renditionSet.delete(i),queueMicrotask(()=>{r(i).track.enabled&&e.dispatchEvent(new ot("removerendition",{rendition:i}))})}function Gt(i){const e=r(i).media.audioRenditions;!e||r(e).changeRequested||(r(e).changeRequested=!0,queueMicrotask(()=>{delete r(e).changeRequested,r(i).track.enabled&&e.dispatchEvent(new Event("change"))}))}function B(i){return[...r(i).media.audioTracks].filter(t=>t.enabled).flatMap(t=>[...r(t).renditionSet])}var q,O,j;class lt extends EventTarget{constructor(){super(...arguments);u(this,q,void 0);u(this,O,void 0);u(this,j,void 0)}[Symbol.iterator](){return B(this).values()}get length(){return B(this).length}getRenditionById(t){var n;return(n=B(this).find(s=>"".concat(s.id)==="".concat(t)))!=null?n:null}get selectedIndex(){return B(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[n,s]of B(this).entries())s.selected=n===t}get onaddrendition(){return o(this,q)}set onaddrendition(t){o(this,q)&&(this.removeEventListener("addrendition",o(this,q)),c(this,q,void 0)),typeof t=="function"&&(c(this,q,t),this.addEventListener("addrendition",t))}get onremoverendition(){return o(this,O)}set onremoverendition(t){o(this,O)&&(this.removeEventListener("removerendition",o(this,O)),c(this,O,void 0)),typeof t=="function"&&(c(this,O,t),this.addEventListener("removerendition",t))}get onchange(){return o(this,j)}set onchange(t){o(this,j)&&(this.removeEventListener("change",o(this,j)),c(this,j,void 0)),typeof t=="function"&&(c(this,j,t),this.addEventListener("change",t))}}q=new WeakMap,O=new WeakMap,j=new WeakMap;var D;class Jt{constructor(){f(this,"src");f(this,"id");f(this,"bitrate");f(this,"codec");u(this,D,!1)}get selected(){return o(this,D)}set selected(e){o(this,D)!==e&&(c(this,D,e),Gt(this))}}D=new WeakMap;function pt(i,e){const t=i.audioTracks;r(e).media=i,r(e).renditionSet||(r(e).renditionSet=new Set);const n=r(t).trackSet;n.add(e);const s=n.size-1;s in kt.prototype||Object.defineProperty(kt.prototype,s,{get(){return[...r(this).trackSet][s]}}),queueMicrotask(()=>{t.dispatchEvent(new rt("addtrack",{track:e}))})}function gt(i){var n;const e=(n=r(i).media)==null?void 0:n.audioTracks;if(!e)return;r(e).trackSet.delete(i),queueMicrotask(()=>{e.dispatchEvent(new rt("removetrack",{track:i}))})}function Kt(i){const e=r(i).media.audioTracks;!e||r(e).changeRequested||(r(e).changeRequested=!0,queueMicrotask(()=>{delete r(e).changeRequested,e.dispatchEvent(new Event("change"))}))}var P,$,M,N,it;class kt extends EventTarget{constructor(){super();u(this,N);u(this,P,void 0);u(this,$,void 0);u(this,M,void 0);r(this).trackSet=new Set}[Symbol.iterator](){return o(this,N,it).values()}get length(){return o(this,N,it).size}getTrackById(t){var n;return(n=[...o(this,N,it)].find(s=>s.id===t))!=null?n:null}get onaddtrack(){return o(this,P)}set onaddtrack(t){o(this,P)&&(this.removeEventListener("addtrack",o(this,P)),c(this,P,void 0)),typeof t=="function"&&(c(this,P,t),this.addEventListener("addtrack",t))}get onremovetrack(){return o(this,$)}set onremovetrack(t){o(this,$)&&(this.removeEventListener("removetrack",o(this,$)),c(this,$,void 0)),typeof t=="function"&&(c(this,$,t),this.addEventListener("removetrack",t))}get onchange(){return o(this,M)}set onchange(t){o(this,M)&&(this.removeEventListener("change",o(this,M)),c(this,M,void 0)),typeof t=="function"&&(c(this,M,t),this.addEventListener("change",t))}}P=new WeakMap,$=new WeakMap,M=new WeakMap,N=new WeakSet,it=function(){return r(this).trackSet};var U;class Ot{constructor(){f(this,"id");f(this,"kind");f(this,"label","");f(this,"language","");f(this,"sourceBuffer");u(this,U,!1)}addRendition(e,t,n){const s=new Jt;return s.src=e,s.codec=t,s.bitrate=n,Ut(this,s),s}removeRendition(e){Wt(e)}get enabled(){return o(this,U)}set enabled(e){o(this,U)!==e&&(c(this,U,e),Kt(this))}}U=new WeakMap;const mt=nt(globalThis.HTMLMediaElement,"video"),yt=nt(globalThis.HTMLMediaElement,"audio");function te(i){if(!(i!=null&&i.prototype))return i;const e=nt(i,"video");(!e||"".concat(e).includes("[native code]"))&&Object.defineProperty(i.prototype,"videoTracks",{get(){return Qt(this)}});const t=nt(i,"audio");(!t||"".concat(t).includes("[native code]"))&&Object.defineProperty(i.prototype,"audioTracks",{get(){return Xt(this)}}),"addVideoTrack"in i.prototype||(i.prototype.addVideoTrack=function(v,k="",p=""){const y=new qt;return y.kind=v,y.label=k,y.language=p,ut(this,y),y}),"removeVideoTrack"in i.prototype||(i.prototype.removeVideoTrack=ht),"addAudioTrack"in i.prototype||(i.prototype.addAudioTrack=function(v,k="",p=""){const y=new Ot;return y.kind=v,y.label=k,y.language=p,pt(this,y),y}),"removeAudioTrack"in i.prototype||(i.prototype.removeAudioTrack=gt),"videoRenditions"in i.prototype||Object.defineProperty(i.prototype,"videoRenditions",{get(){return n(this)}});const n=v=>{let k=r(v).videoRenditions;return k||(k=new vt,r(k).media=v,r(v).videoRenditions=k),k};"audioRenditions"in i.prototype||Object.defineProperty(i.prototype,"audioRenditions",{get(){return s(this)}});const s=v=>{let k=r(v).audioRenditions;return k||(k=new lt,r(k).media=v,r(v).audioRenditions=k),k};return i}function nt(i,e){var t;if(i!=null&&i.prototype)return(t=Object.getOwnPropertyDescriptor(i.prototype,"".concat(e,"Tracks")))==null?void 0:t.get}function Qt(i){var t;let e=r(i).videoTracks;if(!e&&(e=new ft,r(i).videoTracks=e,mt)){const n=mt.call((t=i.nativeEl)!=null?t:i);for(const s of n)ut(i,s);n.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),n.addEventListener("addtrack",s=>{if([...e].some(v=>v instanceof qt)){for(const v of n)ht(v);return}ut(i,s.track)}),n.addEventListener("removetrack",s=>{ht(s.track)})}return e}function Xt(i){var t;let e=r(i).audioTracks;if(!e&&(e=new kt,r(i).audioTracks=e,yt)){const n=yt.call((t=i.nativeEl)!=null?t:i);for(const s of n)pt(i,s);n.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),n.addEventListener("addtrack",s=>{if([...e].some(v=>v instanceof Ot)){for(const v of n)gt(v);return}pt(i,s.track)}),n.addEventListener("removetrack",s=>{gt(s.track)})}return e}export{_t as C,te as M};
